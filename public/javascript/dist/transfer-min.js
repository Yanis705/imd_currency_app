if(null!==localStorage.getItem("token")){let e="http://localhost:3000";Primus.connect(e,{reconnect:{max:1/0,min:500,retries:10}});document.querySelector("#newTransaction").addEventListener("click",e=>{let t=!0;document.querySelector(".error.general").innerHTML="",document.querySelector(".error.to").innerHTML="",document.querySelector(".error.amount").innerHTML="";let r=document.querySelector("#transactionTo").value,o=document.querySelector("#amount").value,n=document.querySelector("#reason").value,a=document.querySelector("#message").value;""==r&&(document.querySelector(".error.to").innerHTML="This field cannot be empty",t=!1),o<=0&&(document.querySelector(".error.amount").innerHTML="You have to send at least 1 IMDollar",t=!1),t&&fetch("/api/v1/transfers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({to:r,IMDollars:o,reason:n,message:a})}).then(e=>e.json()).then(e=>{"success"===e.status?window.location="/transactionCompleted":"error"===e.status&&(document.querySelector(".error.general").innerHTML=e.message)}),e.preventDefault()})}else window.location="/login";