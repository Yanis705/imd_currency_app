document.querySelector(".login").addEventListener("click",e=>{let r=!0,t=document.querySelector("#email").value;var o=t.includes("@student.thomasmore.be");let n=document.querySelector("#pw").value;document.querySelector(".error.email").innerHTML="",document.querySelector(".error.password").innerHTML="",""==t?(r=!1,document.querySelector(".error.email").innerHTML="Email cannot be empty"):o||(r=!1,document.querySelector(".error.email").innerHTML="Email needs to be with @student.thomasmore.be"),""==n&&(r=!1,document.querySelector(".error.password").innerHTML="Password cannot be empty"),r&&fetch("/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then(e=>e.json()).then(e=>{if("success"===e.status){let r=e.data.token;localStorage.setItem("token",r),window.location="/"}else document.querySelector(".error").innerHTML="Invalid login credentials"}),e.preventDefault()});